1:"$Sreact.fragment"
2:I[9943,["226","static/chunks/226-862082d624eb4c36.js","177","static/chunks/app/layout-39e920f3af616175.js"],"default"]
3:I[7555,[],""]
4:I[1295,[],""]
5:I[9543,["874","static/chunks/874-38f3e3a153189b5b.js","345","static/chunks/app/not-found-5bf305b4c1bcf0be.js"],"default"]
7:I[9665,[],"OutletBoundary"]
a:I[9665,[],"ViewportBoundary"]
c:I[9665,[],"MetadataBoundary"]
e:I[6614,[],""]
:HL["/_next/static/media/9b8c15de1de72117-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/a34f9d1faa5f3315-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/ea939e983bf69f98.css","style"]
:HL["/_next/static/css/569eef2e4a7bd275.css","style"]
:HL["/_next/static/css/4a7056ac121ffeac.css","style"]
0:{"P":null,"b":"dzvgw2hfo6h3tGfB5GqZ4","p":"","c":["","blog","docker-best-practices",""],"i":false,"f":[[["",{"children":["blog",{"children":[["slug","docker-best-practices","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/ea939e983bf69f98.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/569eef2e4a7bd275.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","2",{"rel":"stylesheet","href":"/_next/static/css/4a7056ac121ffeac.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","children":[["$","head",null,{"children":[["$","link",null,{"rel":"icon","href":"/favicon.ico","sizes":"any"}],["$","link",null,{"rel":"apple-touch-icon","href":"/apple-touch-icon.png"}],["$","meta",null,{"name":"theme-color","content":"#1E1E2E"}]]}],["$","body",null,{"className":"__className_d65c78 __variable_3757f2 min-h-screen flex justify-content-center","children":[["$","$L2",null,{}],["$","div",null,{"className":"container relative z-10 py-8","children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","$L5",null,{}],"$undefined",[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/f0d9dff4e4a55ea6.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]]}]]}]]}],{"children":["blog",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","docker-best-practices","d"],["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L6","$undefined",null,["$","$L7",null,{"children":["$L8","$L9",null]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","md_KwGpAd1zRrKgjPLzgp",{"children":[["$","$La",null,{"children":"$Lb"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],["$","$Lc",null,{"children":"$Ld"}]]}],false]],"m":"$undefined","G":["$e","$undefined"],"s":false,"S":true}
f:I[5506,["711","static/chunks/8e1d74a4-320cbaf239bb596a.js","226","static/chunks/226-862082d624eb4c36.js","874","static/chunks/874-38f3e3a153189b5b.js","352","static/chunks/352-3b8695b40845a8a1.js","953","static/chunks/app/blog/%5Bslug%5D/page-6714e8ce9bdcfcae.js"],"default"]
10:I[9615,["711","static/chunks/8e1d74a4-320cbaf239bb596a.js","226","static/chunks/226-862082d624eb4c36.js","874","static/chunks/874-38f3e3a153189b5b.js","352","static/chunks/352-3b8695b40845a8a1.js","953","static/chunks/app/blog/%5Bslug%5D/page-6714e8ce9bdcfcae.js"],"default"]
11:I[3063,["711","static/chunks/8e1d74a4-320cbaf239bb596a.js","226","static/chunks/226-862082d624eb4c36.js","874","static/chunks/874-38f3e3a153189b5b.js","352","static/chunks/352-3b8695b40845a8a1.js","953","static/chunks/app/blog/%5Bslug%5D/page-6714e8ce9bdcfcae.js"],"Image"]
13:I[6874,["711","static/chunks/8e1d74a4-320cbaf239bb596a.js","226","static/chunks/226-862082d624eb4c36.js","874","static/chunks/874-38f3e3a153189b5b.js","352","static/chunks/352-3b8695b40845a8a1.js","953","static/chunks/app/blog/%5Bslug%5D/page-6714e8ce9bdcfcae.js"],""]
12:T6f8,https://prod-files-secure.s3.us-west-2.amazonaws.com/2c542bf5-b0b9-42d3-88be-ec745aebe475/c349bcfc-340f-4317-85c3-2c84ad288b2f/DALLE_2024-12-24_23.28.30_-_A_humorous_digital_illustration_of_a_software_developer_in_a_modern_office_setting._The_developer_is_sitting_at_a_desk_with_a_computer_screen_displayi.webp?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4667D5ZOEGS%2F20250325%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250325T124658Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEK3%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQDpjb2BdEy8OWAOjRAX0BcID7pPrULE7KqaI8tOoCvikAIgGbYiFQVTRTOQmgpfOQcKoWDvgvHORX7n4SSoickimSAq%2FwMIFhAAGgw2Mzc0MjMxODM4MDUiDDmyqubuyVPCb56AYircAxQyjPF%2BqPv38cFyDxGT7jfqaYRyaOhQ1jHTziHIpoxW%2FiFDQ4WC8tXK1T3REl4qVygXL4E3qfqfiIIUiUAZ3eaYVT42C%2BkvDnj5BKyLxvQ6FLQvs3MRHga41Ftr3NWk0yPL%2Fxu2o0yoF4rg7VqXjyPKZESBhkeTBYXp3lunnzWa%2F90tcBmtUGzfC9zOnmgEtz%2BvIiRByc3Mpp7mOv7vQavxkT%2FklFnt13Tz7JLJeKCqR4m5v8YX6Z%2Bl138CMA3w9vV644z%2BGUny%2BjZdbVDlKj17%2FCv4yen45%2FfmYKjiDq4CIgwb57CuBJCedye21PJ3s202u%2FO%2BMO5n%2B68LeU3V2pXkXDQA5NHlyCvjck4WMIVruntXtagFnKRRkZBwGQPtohm1rkfbGITtJFX5%2B3iWqAP2ydiFVBNE%2FJHCBdFFUurvL85MfKOOXhzyEX%2Bbm0z8Ks5xXB%2FjKfss6ok3If2s1PxNUFL5v4csC8UQgLMLlspZVxHKEs2VldZMdvYt4CjgSt4YNYkWrmnWKiO4%2BtMusZ3OTXp4zVxOxckTFdR2dttwi2XH3EU3edszNJyonMantaV7tzYmWt9BeSEUpKdHMxsjJ3oBnW%2FnJC216QgxDMU2NFDaMHI9S4jxbnMSMLHEir8GOqUBPtw7Af%2FmYJ27vXMm85NapgXbVVphdMAy5QUyKvdzvYEW6ZAhJJLw6PF0rfA5aKzqCo1SQFM0Kg4uLEQ%2FlvgVTFnJLBgNwBfp2rkyVe29Ofz2ZH8aqKZDlTVhT%2Bu0b5lPJwoYPKU3a3dQ4KLJAVf%2FQJWPkaztoZ03F5VAW8iwmWW8IwcBXli5H42R7k852fWZRCRVtiA9OjSDShpkj5N10evrTMO0&X-Amz-Signature=9c1157814d105099e784e0a79098ade0db8a6333f6cae43db69e3801acd391c9&X-Amz-SignedHeaders=host&x-id=GetObject6:["$","main",null,{"className":"min-h-screen bg-background","children":[["$","$Lf",null,{}],["$","div",null,{"className":"container mx-auto max-w-5xl xl:max-w-6xl px-3 md:px-4 py-6 md:py-8","children":["$","article",null,{"className":"pixel-border p-4 pb-6 bg-card rounded-lg shadow-lg","children":[["$","div",null,{"className":"mb-6","children":[["$","$L10",null,{"text":"Build Smarter: Best Practices for Creating Optimized Dockerfiles","className":"mb-4"}],["$","div",null,{"className":"flex flex-wrap gap-2 mb-4","children":[["$","span","Docker",{"className":"blog-tag px-3 py-1 text-sm rounded-full bg-background text-primary border border-primary","children":"Docker"}],["$","span","Best Practices",{"className":"blog-tag px-3 py-1 text-sm rounded-full bg-background text-primary border border-primary","children":"Best Practices"}]]}],["$","div",null,{"className":"text-text-secondary","children":["Published on"," ","March 6, 2025"]}]]}],["$","div",null,{"className":"mb-8","children":["$","div",null,{"className":"relative w-full max-w-4xl mx-auto rounded-lg overflow-hidden","children":["$","$L11",null,{"src":"$12","alt":"Build Smarter: Best Practices for Creating Optimized Dockerfiles","width":1920,"height":1080,"className":"w-full h-auto max-h-[70vh] object-contain","priority":true,"quality":95}]}]}],["$","div",null,{"style":{"maxWidth":"90ch","margin":"0 auto"},"className":"text-text-primary","children":[["$","h1","h1-0",{"className":"text-2xl font-pixel text-primary mb-6 mt-6","children":["$","strong","strong-0",{"children":"Introduction"}]}],"\n",["$","p","p-0",{"className":"mb-4","children":"If youâ€™re a developer, youâ€™ve probably encountered the frustrating situation where your code runs perfectly on your local environment but fails to work on other environments, such as development, staging, or production. This issue can stem from various reasons, such as differences in operating systems, mismatched runtime versions, dependencies, environment configurations, and more."}],"\n",["$","p","p-1",{"className":"mb-4","children":"To address these challenges, Docker emerged as a revolutionary solution to eliminate environment inconsistencies. By leveraging containerization technology, Docker provides a simple yet powerful approach that ensures your application runs consistently across all environments."}],"\n",["$","p","p-2",{"className":"mb-4","children":["Sounds great, doesnâ€™t it? However, like any solution, Docker isnâ€™t without its challenges. A good tool is only effective when used correctly, and poor implementation can lead to its own set of problems. To help you avoid these pitfalls, today I, Dang Do Quang Bao, will share some ",["$","strong","strong-0",{"children":"Docker Best Practices"}]," and provide you with a comprehensive understanding of how it works."]}],"\n",["$","h1","h1-1",{"className":"text-2xl font-pixel text-primary mb-6 mt-6","children":"Identifying Inefficiencies in Dockerfile: A Case Study"}],"\n",["$","p","p-3",{"className":"mb-4","children":"Below is the Dockerfile weâ€™ll analyze:"}],"\n",["$","p","p-4",{"className":"mb-4","children":["$","div","img-0",{"className":"my-6 mx-auto max-w-full","children":["$","div",null,{"className":"p-1 rounded-lg inline-block overflow-hidden","children":["$","div",null,{"className":"relative","children":["$","$L11",null,{"src":"https://lh7-rt.googleusercontent.com/docsz/AD_4nXeZ5ZWAGBRh70FuxIuF9VtpeUvz8oNjEhRyzQAzhfKbol6waKFzku6DpiSs96kKqTsA-YSD7yHB5-iiG6jjjlWg03J0weCxrHFm3t6PMrRIstTUX7VIDvBMTejky4OCIHUnJ-_BjQ?key=YMFQ0cmQDPJj7zrqY5jYTBGP","alt":"image","width":800,"height":600,"style":{"width":"100%","height":"auto","maxHeight":"80vh"},"className":"object-contain","loading":"lazy","unoptimized":false}]}]}]}]}],"\n",["$","h2","h2-0",{"className":"text-lg font-pixel text-primary mb-4 mt-5","children":[["$","strong","strong-0",{"children":"Key Observations"}],":"]}],"\n",["$","ol","ol-0",{"className":"list-decimal pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":["$","strong","strong-0",{"children":"Base Image:"}]}],"\n"]}],"\n",["$","ul","ul-0",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":["The Dockerfile uses ",["$","code","code-0",{"className":"bg-card/50 px-1 py-0.5 rounded text-primary","children":"ubuntu:latest"}],", which is a general-purpose image. While versatile, it is significantly larger compared to minimal images like ",["$","code","code-1",{"className":"bg-card/50 px-1 py-0.5 rounded text-primary","children":"ubuntu:slim"}]," or Node.js-specific images like ",["$","code","code-2",{"className":"bg-card/50 px-1 py-0.5 rounded text-primary","children":"node:20-slim"}],", ",["$","code","code-3",{"className":"bg-card/50 px-1 py-0.5 rounded text-primary","children":"node:20-alpine"}],"."]}],"\n"]}],"\n",["$","ol","ol-1",{"className":"list-decimal pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":["$","strong","strong-0",{"children":"Redundant Package Installation:"}]}],"\n"]}],"\n",["$","ul","ul-1",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":["Tools like ",["$","code","code-0",{"className":"bg-card/50 px-1 py-0.5 rounded text-primary","children":"vim"}],", ",["$","code","code-1",{"className":"bg-card/50 px-1 py-0.5 rounded text-primary","children":"wget"}],", and ",["$","code","code-2",{"className":"bg-card/50 px-1 py-0.5 rounded text-primary","children":"git"}]," are installed but may not be necessary for building or running the application."]}],"\n"]}],"\n",["$","ol","ol-2",{"className":"list-decimal pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":["$","strong","strong-0",{"children":"Global npm Packages:"}]}],"\n"]}],"\n",["$","ul","ul-2",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":["Pages like ",["$","code","code-0",{"className":"bg-card/50 px-1 py-0.5 rounded text-primary","children":"nodemon"}],", ",["$","code","code-1",{"className":"bg-card/50 px-1 py-0.5 rounded text-primary","children":"ESLint"}],", and ",["$","code","code-2",{"className":"bg-card/50 px-1 py-0.5 rounded text-primary","children":"prettier"}]," are installed globally. These are typically used for development and are not required in a production image."]}],"\n"]}],"\n",["$","ol","ol-3",{"className":"list-decimal pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":["$","strong","strong-0",{"children":"Caching Issues:"}]}],"\n"]}],"\n",["$","ul","ul-3",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":[["$","code","code-0",{"className":"bg-card/50 px-1 py-0.5 rounded text-primary","children":"COPY . ."}]," is placed before ",["$","code","code-1",{"className":"bg-card/50 px-1 py-0.5 rounded text-primary","children":"npm install"}],", invalidating the cache whenever any application file changes, even if the dependencies remain the same."]}],"\n"]}],"\n",["$","ol","ol-4",{"className":"list-decimal pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":["$","strong","strong-0",{"children":"Shell Customization:"}]}],"\n"]}],"\n",["$","ul","ul-4",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"Setting up a custom shell prompt (PS1) is irrelevant for production environments, adding unnecessary steps."}],"\n"]}],"\n",["$","ol","ol-5",{"className":"list-decimal pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":["$","strong","strong-0",{"children":"Development Tool in Production:"}]}],"\n"]}],"\n",["$","ul","ul-5",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"The CMD uses nodemon, which is a development tool, to run the application"}],"\n"]}],"\n",["$","h1","h1-2",{"className":"text-2xl font-pixel text-primary mb-6 mt-6","children":["$","strong","strong-0",{"children":"Optimized your Docker Image"}]}],"\n",["$","p","p-5",{"className":"mb-4","children":["Hereâ€™s how we can optimize the Dockerfile step by step, showing the ",["$","strong","strong-0",{"children":"before"}]," and ",["$","strong","strong-1",{"children":"after"}]," for each section with the ",["$","strong","strong-2",{"children":"result"}]," to clearly distinguish the improvements."]}],"\n",["$","h3","h3-0",{"className":"text-base font-pixel text-primary mb-3 mt-4","children":"1. Change the Base Image"}],"\n",["$","p","p-6",{"className":"mb-4","children":["$","strong","strong-0",{"children":"Before:"}]}],"\n",["$","pre","pre-0",{"children":["$","div","code-0",{"className":"my-6","children":["$","div",null,{"className":"bg-card p-4 rounded-lg border border-primary/20","style":{"color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto","background":"#1e1e1e"},"children":["$","code",null,{"className":"language-docker","style":{"whiteSpace":"pre","color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token instruction","style":{"color":"#569CD6"},"children":["FROM"]}],["$","span","code-segement1",{"className":"token instruction","style":{},"children":[" ubuntu:latest"]}],["$","span","code-segement2",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement3",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement4",{"className":"token instruction","style":{"color":"#569CD6"},"children":["RUN"]}],["$","span","code-segement5",{"className":"token instruction","style":{},"children":[" apt-get update && apt-get install -y curl &&"]}],["$","span","code-segement6",{"className":"$undefined","style":{},"children":["\n"]}],"curl -fsSL https://deb.nodesource.com/setup_20.x | bash - && \\\n","apt-get install -y nodejs"]]}]}]}]}],"\n",["$","hr","hr-0",{"className":"border-t border-primary/20 my-6"}],"\n",["$","ul","ul-6",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":["Use ",["$","code","code-0",{"className":"bg-card/50 px-1 py-0.5 rounded text-primary","children":"ubuntu:latest"}]," a general-purpose image that is large and includes many unnecessary tools."]}],"\n"]}],"\n",["$","p","p-7",{"className":"mb-4","children":["$","strong","strong-0",{"children":"After:"}]}],"\n",["$","pre","pre-1",{"children":["$","div","code-0",{"className":"my-6","children":["$","div",null,{"className":"bg-card p-4 rounded-lg border border-primary/20","style":{"color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto","background":"#1e1e1e"},"children":["$","code",null,{"className":"language-docker","style":{"whiteSpace":"pre","color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token instruction","style":{"color":"#569CD6"},"children":["FROM"]}],["$","span","code-segement1",{"className":"token instruction","style":{},"children":[" node:20-alpine"]}]]]}]}]}]}],"\n",["$","hr","hr-1",{"className":"border-t border-primary/20 my-6"}],"\n",["$","ul","ul-7",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"Switches to node:20-alpine, a lightweight image specifically tailored for Node.js applications."}],"\n"]}],"\n",["$","p","p-8",{"className":"mb-4","children":["$","strong","strong-0",{"children":"Result:"}]}],"\n",["$","p","p-9",{"className":"mb-4","children":["$","div","img-0",{"className":"my-6 mx-auto max-w-full","children":["$","div",null,{"className":"p-1 rounded-lg inline-block overflow-hidden","children":["$","div",null,{"className":"relative","children":["$","$L11",null,{"src":"https://lh7-rt.googleusercontent.com/docsz/AD_4nXeTHpY_PQmh1DjL4vYbDtFK1t8j6mXtmVfuK3nouNNC9wHafMNNA1SBIOxs0eWFh8A22AzzkYRNw8CKYPG3SRDrTISaX9-v6kXjyOD3qzBhCUarSjgWMqBfXtBONeygO-11PH5C?key=YMFQ0cmQDPJj7zrqY5jYTBGP","alt":"image","width":800,"height":600,"style":{"width":"100%","height":"auto","maxHeight":"80vh"},"className":"object-contain","loading":"lazy","unoptimized":false}]}]}]}]}],"\n",["$","ul","ul-8",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"With the first change being applied, the image size is drastically reduced by about ~200MB."}],"\n"]}],"\n",["$","h3","h3-1",{"className":"text-base font-pixel text-primary mb-3 mt-4","children":"2. Simplify Installed Packages"}],"\n",["$","p","p-10",{"className":"mb-4","children":["$","strong","strong-0",{"children":"Before:"}]}],"\n",["$","pre","pre-2",{"children":["$","div","code-0",{"className":"my-6","children":["$","div",null,{"className":"bg-card p-4 rounded-lg border border-primary/20","style":{"color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto","background":"#1e1e1e"},"children":["$","code",null,{"className":"language-docker","style":{"whiteSpace":"pre","color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token instruction","style":{"color":"#569CD6"},"children":["RUN"]}],["$","span","code-segement1",{"className":"token instruction","style":{},"children":[" apt-get update && apt-get install -y "]}],["$","span","code-segement2",{"className":"token instruction","style":{"color":"#d4d4d4"},"children":["\\"]}],["$","span","code-segement3",{"className":"token instruction","style":{},"children":["\n"]}],["$","span","code-segement4",{"className":"token instruction","style":{},"children":["curl "]}],["$","span","code-segement5",{"className":"token instruction","style":{"color":"#d4d4d4"},"children":["\\"]}],["$","span","code-segement6",{"className":"token instruction","style":{},"children":["\n"]}],["$","span","code-segement7",{"className":"token instruction","style":{},"children":["wget "]}],["$","span","code-segement8",{"className":"token instruction","style":{"color":"#d4d4d4"},"children":["\\"]}],["$","span","code-segement9",{"className":"token instruction","style":{},"children":["\n"]}],["$","span","code-segement10",{"className":"token instruction","style":{},"children":["git "]}],["$","span","code-segement11",{"className":"token instruction","style":{"color":"#d4d4d4"},"children":["\\"]}],["$","span","code-segement12",{"className":"token instruction","style":{},"children":["\n"]}],["$","span","code-segement13",{"className":"token instruction","style":{},"children":["vim "]}],["$","span","code-segement14",{"className":"token instruction","style":{"color":"#d4d4d4"},"children":["\\"]}],["$","span","code-segement15",{"className":"token instruction","style":{},"children":["\n"]}],["$","span","code-segement16",{"className":"token instruction","style":{},"children":["python3 "]}],["$","span","code-segement17",{"className":"token instruction","style":{"color":"#d4d4d4"},"children":["\\"]}],["$","span","code-segement18",{"className":"token instruction","style":{},"children":["\n"]}],["$","span","code-segement19",{"className":"token instruction","style":{},"children":["make "]}],["$","span","code-segement20",{"className":"token instruction","style":{"color":"#d4d4d4"},"children":["\\"]}],["$","span","code-segement21",{"className":"token instruction","style":{},"children":["\n"]}],["$","span","code-segement22",{"className":"token instruction","style":{},"children":["g++ && "]}],["$","span","code-segement23",{"className":"token instruction","style":{"color":"#d4d4d4"},"children":["\\"]}],["$","span","code-segement24",{"className":"token instruction","style":{},"children":["\n"]}],["$","span","code-segement25",{"className":"token instruction","style":{},"children":["curl -fsSL https://deb.nodesource.com/setup_20.x | bash - && "]}],["$","span","code-segement26",{"className":"token instruction","style":{"color":"#d4d4d4"},"children":["\\"]}],["$","span","code-segement27",{"className":"token instruction","style":{},"children":["\n"]}],["$","span","code-segement28",{"className":"token instruction","style":{},"children":["apt-get install -y nodejs"]}]]]}]}]}]}],"\n",["$","hr","hr-2",{"className":"border-t border-primary/20 my-6"}],"\n",["$","ul","ul-9",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"Installs multiple tools (curl, wget, vim, git) and Node.js manually, increasing the image size and complexity."}],"\n"]}],"\n",["$","p","p-11",{"className":"mb-4","children":["$","strong","strong-0",{"children":"After:"}]}],"\n",["$","pre","pre-3",{"children":["$","div","code-0",{"className":"my-6","children":["$","div",null,{"className":"bg-card p-4 rounded-lg border border-primary/20","style":{"color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto","background":"#1e1e1e"},"children":["$","code",null,{"className":"language-docker","style":{"whiteSpace":"pre","color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token instruction","style":{"color":"#569CD6"},"children":["RUN"]}],["$","span","code-segement1",{"className":"token instruction","style":{},"children":[" apk add --no-cache python3 make g++"]}]]]}]}]}]}],"\n",["$","hr","hr-3",{"className":"border-t border-primary/20 my-6"}],"\n",["$","ul","ul-10",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"Uses apk (Alpineâ€™s package manager) to install only essential build tools (python3, make, g++)."}],"\n"]}],"\n",["$","p","p-12",{"className":"mb-4","children":["$","strong","strong-0",{"children":"Result:"}]}],"\n",["$","p","p-13",{"className":"mb-4","children":["$","div","img-0",{"className":"my-6 mx-auto max-w-full","children":["$","div",null,{"className":"p-1 rounded-lg inline-block overflow-hidden","children":["$","div",null,{"className":"relative","children":["$","$L11",null,{"src":"https://lh7-rt.googleusercontent.com/docsz/AD_4nXcJSbZ_V2SRJzL3uJ1A9O8Q14HQrOgEae2jMBqyfLAwSEMu48vnU6jvm9j0XEG2NoRoOoDCMkN6SmjZfcuI0jVX4iSVjn6YjxflYWEANbsQG8qjMzf0hlD8mHf2q0qcE-OaEbew?key=YMFQ0cmQDPJj7zrqY5jYTBGP","alt":"image","width":800,"height":600,"style":{"width":"100%","height":"auto","maxHeight":"80vh"},"className":"object-contain","loading":"lazy","unoptimized":false}]}]}]}]}],"\n",["$","ul","ul-11",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"The image should be cleaner and smaller after removing the unnecessary tools, packages. (~250MB vs ~400MB with the older version)"}],"\n"]}],"\n",["$","h3","h3-2",{"className":"text-base font-pixel text-primary mb-3 mt-4","children":"3. Leverage Dependency Caching"}],"\n",["$","p","p-14",{"className":"mb-4","children":["$","strong","strong-0",{"children":"Before:"}]}],"\n",["$","pre","pre-4",{"children":["$","div","code-0",{"className":"my-6","children":["$","div",null,{"className":"bg-card p-4 rounded-lg border border-primary/20","style":{"color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto","background":"#1e1e1e"},"children":["$","code",null,{"className":"language-docker","style":{"whiteSpace":"pre","color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token instruction","style":{"color":"#569CD6"},"children":["COPY"]}],["$","span","code-segement1",{"className":"token instruction","style":{},"children":[" . ."]}],["$","span","code-segement2",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement3",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement4",{"className":"token instruction","style":{"color":"#569CD6"},"children":["RUN"]}],["$","span","code-segement5",{"className":"token instruction","style":{},"children":[" npm install"]}]]]}]}]}]}],"\n",["$","hr","hr-4",{"className":"border-t border-primary/20 my-6"}],"\n",["$","ul","ul-12",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"Copies all files before installing dependencies, causing cache invalidation whenever any file changes, even if dependencies remain unchanged."}],"\n"]}],"\n",["$","p","p-15",{"className":"mb-4","children":["$","div","img-0",{"className":"my-6 mx-auto max-w-full","children":["$","div",null,{"className":"p-1 rounded-lg inline-block overflow-hidden","children":["$","div",null,{"className":"relative","children":["$","$L11",null,{"src":"https://lh7-rt.googleusercontent.com/docsz/AD_4nXeWKxM9C6-1g702-0eDpIZnZ9lD4cEBUSfZVRxRtk6spW7VKinxP-TaHn2B_w4ga2hjykhaCG7WFmqUjJIQmMFiA6WO36FVdkPuoFYIEeeNrbDnK-PPIMDvXo8yyJCZz877MXSH?key=YMFQ0cmQDPJj7zrqY5jYTBGP","alt":"image","width":800,"height":600,"style":{"width":"100%","height":"auto","maxHeight":"80vh"},"className":"object-contain","loading":"lazy","unoptimized":false}]}]}]}]}],"\n",["$","p","p-16",{"className":"mb-4","children":["$","div","img-0",{"className":"my-6 mx-auto max-w-full","children":["$","div",null,{"className":"p-1 rounded-lg inline-block overflow-hidden","children":["$","div",null,{"className":"relative","children":["$","$L11",null,{"src":"https://lh7-rt.googleusercontent.com/docsz/AD_4nXeypp19TyJAyZ_qJsU8g5wYT6YRholmJ8LPbOiOrfA7Oi44dO-ofDtusqUCKv3yunigQJV2DHBgHab76waSaHetvC7x3gFLO5o8S6GPdBoKdbCFc3w5A-XrLj3u4jC1kxuo3u5AOQ?key=YMFQ0cmQDPJj7zrqY5jYTBGP","alt":"image","width":800,"height":600,"style":{"width":"100%","height":"auto","maxHeight":"80vh"},"className":"object-contain","loading":"lazy","unoptimized":false}]}]}]}]}],"\n",["$","p","p-17",{"className":"mb-4","children":["$","strong","strong-0",{"children":"After:"}]}],"\n",["$","pre","pre-5",{"children":["$","div","code-0",{"className":"my-6","children":["$","div",null,{"className":"bg-card p-4 rounded-lg border border-primary/20","style":{"color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto","background":"#1e1e1e"},"children":["$","code",null,{"className":"language-docker","style":{"whiteSpace":"pre","color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token instruction","style":{"color":"#569CD6"},"children":["COPY"]}],["$","span","code-segement1",{"className":"token instruction","style":{},"children":[" package*.json ./"]}],["$","span","code-segement2",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement3",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement4",{"className":"token instruction","style":{"color":"#569CD6"},"children":["RUN"]}],["$","span","code-segement5",{"className":"token instruction","style":{},"children":[" npm install --only=production"]}],["$","span","code-segement6",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement7",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement8",{"className":"token instruction","style":{"color":"#569CD6"},"children":["COPY"]}],["$","span","code-segement9",{"className":"token instruction","style":{},"children":[" . ."]}]]]}]}]}]}],"\n",["$","hr","hr-5",{"className":"border-t border-primary/20 my-6"}],"\n",["$","ul","ul-13",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"Copies only package.json and package-lock.json first, ensuring that dependency installation is only re-run when these files change."}],"\n",["$","li","li-1",{"className":"mb-1","children":"Installs only production dependencies (--only=production) to exclude devDependencies."}],"\n"]}],"\n",["$","p","p-18",{"className":"mb-4","children":["$","div","img-0",{"className":"my-6 mx-auto max-w-full","children":["$","div",null,{"className":"p-1 rounded-lg inline-block overflow-hidden","children":["$","div",null,{"className":"relative","children":["$","$L11",null,{"src":"https://lh7-rt.googleusercontent.com/docsz/AD_4nXcTg1X2FrOod4g_zUbEwJKujAFdaTYymR3kwM7vWb19lEo69dwxb_cpB4LeWDf0VICa-N0DUk9pGoQyjc3-qds7GJbh-Tn9Ga2jTYkzsZ622eSqf44dTsgVVV_B6JA-wC1hLk6X5w?key=YMFQ0cmQDPJj7zrqY5jYTBGP","alt":"image","width":800,"height":600,"style":{"width":"100%","height":"auto","maxHeight":"80vh"},"className":"object-contain","loading":"lazy","unoptimized":false}]}]}]}]}],"\n",["$","p","p-19",{"className":"mb-4","children":["$","div","img-0",{"className":"my-6 mx-auto max-w-full","children":["$","div",null,{"className":"p-1 rounded-lg inline-block overflow-hidden","children":["$","div",null,{"className":"relative","children":["$","$L11",null,{"src":"https://lh7-rt.googleusercontent.com/docsz/AD_4nXfB6q1tYw2Xwx0GqIqjwA8U8EIpXDna_J_FJHRK2uC2vtVfSfNQq1pFnibRI7mzH-qiQZOvYSCb4lG-f_326S5G5IM1-Xfc43k5RWV2lAraauRfmLuNPiLV7qAVW6tXaTf452oL?key=YMFQ0cmQDPJj7zrqY5jYTBGP","alt":"image","width":800,"height":600,"style":{"width":"100%","height":"auto","maxHeight":"80vh"},"className":"object-contain","loading":"lazy","unoptimized":false}]}]}]}]}],"\n",["$","p","p-20",{"className":"mb-4","children":["$","strong","strong-0",{"children":"Result:"}]}],"\n",["$","ul","ul-14",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"Faster rebuilds and a smaller image by excluding unnecessary files and dependencies."}],"\n"]}],"\n",["$","h3","h3-3",{"className":"text-base font-pixel text-primary mb-3 mt-4","children":"4. Remove Global npm Installations"}],"\n",["$","p","p-21",{"className":"mb-4","children":["$","strong","strong-0",{"children":"Before:"}]}],"\n",["$","pre","pre-6",{"children":["$","div","code-0",{"className":"my-6","children":["$","div",null,{"className":"bg-card p-4 rounded-lg border border-primary/20","style":{"color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto","background":"#1e1e1e"},"children":["$","code",null,{"className":"language-docker","style":{"whiteSpace":"pre","color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token instruction","style":{"color":"#569CD6"},"children":["RUN"]}],["$","span","code-segement1",{"className":"token instruction","style":{},"children":[" npm install -g nodemon eslint pm2 typescript prettier"]}]]]}]}]}]}],"\n",["$","hr","hr-6",{"className":"border-t border-primary/20 my-6"}],"\n",["$","ul","ul-15",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"Installs global npm packages (nodemon, eslint, pm2, ect.) that are not needed in production, increasing image size."}],"\n"]}],"\n",["$","p","p-22",{"className":"mb-4","children":["$","strong","strong-0",{"children":"After:"}]}],"\n",["$","ul","ul-16",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":[["$","strong","strong-0",{"children":"Remove Entirely:"}]," Global tools are omitted because they are unnecessary in production."]}],"\n"]}],"\n",["$","p","p-23",{"className":"mb-4","children":["$","strong","strong-0",{"children":"Result:"}]}],"\n",["$","ul","ul-17",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"Reduced image size and eliminated unnecessary layers."}],"\n"]}],"\n",["$","h3","h3-4",{"className":"text-base font-pixel text-primary mb-3 mt-4","children":"5. Use a Production-Ready CMD"}],"\n",["$","p","p-24",{"className":"mb-4","children":["$","strong","strong-0",{"children":"Before:"}]}],"\n",["$","pre","pre-7",{"children":["$","div","code-0",{"className":"my-6","children":["$","div",null,{"className":"bg-card p-4 rounded-lg border border-primary/20","style":{"color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto","background":"#1e1e1e"},"children":["$","code",null,{"className":"language-docker","style":{"whiteSpace":"pre","color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token instruction","style":{"color":"#569CD6"},"children":["CMD"]}],["$","span","code-segement1",{"className":"token instruction","style":{},"children":[" ["]}],["$","span","code-segement2",{"className":"token instruction","style":{"color":"#ce9178"},"children":["\"nodemon\""]}],["$","span","code-segement3",{"className":"token instruction","style":{},"children":[", "]}],["$","span","code-segement4",{"className":"token instruction","style":{"color":"#ce9178"},"children":["\"/app/bin/www\""]}],["$","span","code-segement5",{"className":"token instruction","style":{},"children":["]"]}]]]}]}]}]}],"\n",["$","hr","hr-7",{"className":"border-t border-primary/20 my-6"}],"\n",["$","ul","ul-18",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"Uses nodemon, which is meant for development, not production."}],"\n"]}],"\n",["$","p","p-25",{"className":"mb-4","children":["$","strong","strong-0",{"children":"After:"}]}],"\n",["$","pre","pre-8",{"children":["$","div","code-0",{"className":"my-6","children":["$","div",null,{"className":"bg-card p-4 rounded-lg border border-primary/20","style":{"color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto","background":"#1e1e1e"},"children":["$","code",null,{"className":"language-docker","style":{"whiteSpace":"pre","color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token instruction","style":{"color":"#569CD6"},"children":["CMD"]}],["$","span","code-segement1",{"className":"token instruction","style":{},"children":[" ["]}],["$","span","code-segement2",{"className":"token instruction","style":{"color":"#ce9178"},"children":["\"node\""]}],["$","span","code-segement3",{"className":"token instruction","style":{},"children":[", "]}],["$","span","code-segement4",{"className":"token instruction","style":{"color":"#ce9178"},"children":["\"/app/bin/www\""]}],["$","span","code-segement5",{"className":"token instruction","style":{},"children":["]"]}]]]}]}]}]}],"\n",["$","hr","hr-8",{"className":"border-t border-primary/20 my-6"}],"\n",["$","ul","ul-19",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"Uses node to start the application, appropriate for a production environment."}],"\n"]}],"\n",["$","p","p-26",{"className":"mb-4","children":["$","strong","strong-0",{"children":"Result:"}]}],"\n",["$","ul","ul-20",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"A streamlined and efficient startup command."}],"\n"]}],"\n",["$","h3","h3-5",{"className":"text-base font-pixel text-primary mb-3 mt-4","children":"6. Remove Unnecessary Shell Customization"}],"\n",["$","p","p-27",{"className":"mb-4","children":["$","strong","strong-0",{"children":"Before:"}]}],"\n",["$","pre","pre-9",{"children":["$","div","code-0",{"className":"my-6","children":["$","div",null,{"className":"bg-card p-4 rounded-lg border border-primary/20","style":{"color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto","background":"#1e1e1e"},"children":["$","code",null,{"className":"language-docker","style":{"whiteSpace":"pre","color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token instruction","style":{"color":"#569CD6"},"children":["ENV"]}],["$","span","code-segement1",{"className":"token instruction","style":{},"children":[" PS1A="]}],["$","span","code-segement2",{"className":"token instruction","style":{"color":"#ce9178"},"children":["\"ðŸ’»\\[\\e[33m\\]\\u\\[\\e[m\\]@ubuntu-node\\[\\e[36m\\][\\[\\e[m\\]\\[\\e[36m\\]\\w\\[\\e[m\\]\\[\\e[36m\\]]\\[\\e[m\\]: \""]}],["$","span","code-segement3",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement4",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement5",{"className":"token instruction","style":{"color":"#569CD6"},"children":["RUN"]}],["$","span","code-segement6",{"className":"token instruction","style":{},"children":[" echo "]}],["$","span","code-segement7",{"className":"token instruction","style":{"color":"#ce9178"},"children":["'PS1=$PS1A'"]}],["$","span","code-segement8",{"className":"token instruction","style":{},"children":[" >> ~/.bashrc"]}]]]}]}]}]}],"\n",["$","hr","hr-9",{"className":"border-t border-primary/20 my-6"}],"\n",["$","ul","ul-21",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"Sets and applies a custom shell prompt that has no practical use in production"}],"\n"]}],"\n",["$","p","p-28",{"className":"mb-4","children":["$","strong","strong-0",{"children":"After:"}]}],"\n",["$","ul","ul-22",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":[["$","strong","strong-0",{"children":"Remove Entirely"}],": Shell customization is unnecessary and is removed."]}],"\n"]}],"\n",["$","p","p-29",{"className":"mb-4","children":["$","strong","strong-0",{"children":"Result:"}]}],"\n",["$","ul","ul-23",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"Cleaner image with no redundant configurations or layers."}],"\n"]}],"\n",["$","h3","h3-6",{"className":"text-base font-pixel text-primary mb-3 mt-4","children":"Final Optimized Dockerfile"}],"\n",["$","pre","pre-10",{"children":["$","div","code-0",{"className":"my-6","children":["$","div",null,{"className":"bg-card p-4 rounded-lg border border-primary/20","style":{"color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","whiteSpace":"pre","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none","padding":"1em","margin":".5em 0","overflow":"auto","background":"#1e1e1e"},"children":["$","code",null,{"className":"language-docker","style":{"whiteSpace":"pre","color":"#d4d4d4","fontSize":"13px","textShadow":"none","fontFamily":"Menlo, Monaco, Consolas, \"Andale Mono\", \"Ubuntu Mono\", \"Courier New\", monospace","direction":"ltr","textAlign":"left","wordSpacing":"normal","wordBreak":"normal","lineHeight":"1.5","MozTabSize":"4","OTabSize":"4","tabSize":"4","WebkitHyphens":"none","MozHyphens":"none","msHyphens":"none","hyphens":"none"},"children":[false,[["$","span","code-segement0",{"className":"token instruction","style":{"color":"#569CD6"},"children":["FROM"]}],["$","span","code-segement1",{"className":"token instruction","style":{},"children":[" node:20-alpine"]}],["$","span","code-segement2",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement3",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement4",{"className":"token instruction","style":{"color":"#569CD6"},"children":["WORKDIR"]}],["$","span","code-segement5",{"className":"token instruction","style":{},"children":[" /app"]}],["$","span","code-segement6",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement7",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement8",{"className":"token instruction","style":{"color":"#569CD6"},"children":["RUN"]}],["$","span","code-segement9",{"className":"token instruction","style":{},"children":[" apk add --no-cache python3 make g++"]}],["$","span","code-segement10",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement11",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement12",{"className":"token instruction","style":{"color":"#569CD6"},"children":["COPY"]}],["$","span","code-segement13",{"className":"token instruction","style":{},"children":[" package*.json ./"]}],["$","span","code-segement14",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement15",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement16",{"className":"token instruction","style":{"color":"#569CD6"},"children":["RUN"]}],["$","span","code-segement17",{"className":"token instruction","style":{},"children":[" npm install --only=production"]}],["$","span","code-segement18",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement19",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement20",{"className":"token instruction","style":{"color":"#569CD6"},"children":["COPY"]}],["$","span","code-segement21",{"className":"token instruction","style":{},"children":[" . ."]}],["$","span","code-segement22",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement23",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement24",{"className":"token instruction","style":{"color":"#569CD6"},"children":["EXPOSE"]}],["$","span","code-segement25",{"className":"token instruction","style":{},"children":[" 3000"]}],["$","span","code-segement26",{"className":"$undefined","style":{},"children":["\n"]}],["$","span","code-segement27",{"className":"$undefined","style":{},"children":[""]}],["$","span","code-segement28",{"className":"token instruction","style":{"color":"#569CD6"},"children":["CMD"]}],["$","span","code-segement29",{"className":"token instruction","style":{},"children":[" ["]}],["$","span","code-segement30",{"className":"token instruction","style":{"color":"#ce9178"},"children":["\"node\""]}],["$","span","code-segement31",{"className":"token instruction","style":{},"children":[", "]}],["$","span","code-segement32",{"className":"token instruction","style":{"color":"#ce9178"},"children":["\"/app/bin/www\""]}],["$","span","code-segement33",{"className":"token instruction","style":{},"children":["]"]}]]]}]}]}]}],"\n",["$","hr","hr-10",{"className":"border-t border-primary/20 my-6"}],"\n",["$","p","p-30",{"className":"mb-4","children":["$","strong","strong-0",{"children":"Results of Optimization"}]}],"\n",["$","ol","ol-6",{"className":"list-decimal pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":[["$","strong","strong-0",{"children":"Smaller Image Size"}],":"]}],"\n"]}],"\n",["$","ul","ul-24",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"The switch to node:20-alpine and removal of unnecessary packages reduced the image size from 1.36GB, down to 862MB."}],"\n"]}],"\n",["$","p","p-31",{"className":"mb-4","children":["$","div","img-0",{"className":"my-6 mx-auto max-w-full","children":["$","div",null,{"className":"p-1 rounded-lg inline-block overflow-hidden","children":["$","div",null,{"className":"relative","children":["$","$L11",null,{"src":"https://lh7-rt.googleusercontent.com/docsz/AD_4nXcWksFLXqVW3ZOJlCkRomazTqjOceB6jLeo86KqKoYvW6iWPTsnPNLVm8J4RA1xK0NfExDizesbrEvV5lIoLer9Q_jEkxlyHyhdyefNxCxFroDRLocsWNGTrqz6FRW8AAvwkdLM?key=YMFQ0cmQDPJj7zrqY5jYTBGP","alt":"image","width":800,"height":600,"style":{"width":"100%","height":"auto","maxHeight":"80vh"},"className":"object-contain","loading":"lazy","unoptimized":false}]}]}]}]}],"\n",["$","ol","ol-7",{"className":"list-decimal pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":[["$","strong","strong-0",{"children":"Faster Build Times"}],":"]}],"\n"]}],"\n",["$","ul","ul-25",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":["Leveraging caching for dependency installation speeds up rebuilds significantly.","\n",["$","ul","ul-0",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":["Build No Cache:","\n",["$","ul","ul-0",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"Ubuntu (Old Dockerfile): ~223.2s"}],"\n",["$","li","li-1",{"className":"mb-1","children":"Node 20 Alpine (New Dockerfile): 81.9s"}],"\n"]}],"\n"]}],"\n",["$","li","li-1",{"className":"mb-1","children":["Rebuild With Cache (After file changes):","\n",["$","ul","ul-0",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"Ubuntu: 59.7s (Re-run: npm install)"}],"\n",["$","li","li-1",{"className":"mb-1","children":"Node 20 Alpine: 2.7s (All Cached)"}],"\n"]}],"\n"]}],"\n"]}],"\n"]}],"\n"]}],"\n",["$","p","p-32",{"className":"mb-4","children":["$","div","img-0",{"className":"my-6 mx-auto max-w-full","children":["$","div",null,{"className":"p-1 rounded-lg inline-block overflow-hidden","children":["$","div",null,{"className":"relative","children":["$","$L11",null,{"src":"https://lh7-rt.googleusercontent.com/docsz/AD_4nXc0HMU3-FoHiYphBrwjZeBWjwZObdVYCyeMlgOVIcJfz78mKtHILvTzMqUtcADc2Nj6kif0E0WxH1rkQoBm5fDaT_chx4ygZWBn7xV_PKzTlMmSSKoBoqfTopz0gao1DEcrceOVzg?key=YMFQ0cmQDPJj7zrqY5jYTBGP","alt":"image","width":800,"height":600,"style":{"width":"100%","height":"auto","maxHeight":"80vh"},"className":"object-contain","loading":"lazy","unoptimized":false}]}]}]}]}],"\n",["$","p","p-33",{"className":"mb-4","children":["$","div","img-0",{"className":"my-6 mx-auto max-w-full","children":["$","div",null,{"className":"p-1 rounded-lg inline-block overflow-hidden","children":["$","div",null,{"className":"relative","children":["$","$L11",null,{"src":"https://lh7-rt.googleusercontent.com/docsz/AD_4nXdxKHW1MLbiEr2ABMmfSK3PzEBq1yx3Ux5swpCFgKq3p9mwrPaLqgPvUWDps8uZCmGf5WMQrhbKXECUbLFWzVJdZgAk_hD8KCF2SwZotLHCz6PsW0Ih-RZ_QcAn8DGeaYTWVmMkBg?key=YMFQ0cmQDPJj7zrqY5jYTBGP","alt":"image","width":800,"height":600,"style":{"width":"100%","height":"auto","maxHeight":"80vh"},"className":"object-contain","loading":"lazy","unoptimized":false}]}]}]}]}],"\n",["$","ol","ol-8",{"className":"list-decimal pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":[["$","strong","strong-0",{"children":"Production-Ready Setup"}],":"]}],"\n"]}],"\n",["$","ul","ul-26",{"className":"list-disc pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":"The image now includes only essential build tools and runtime dependencies, making it secure and efficient for production."}],"\n"]}],"\n",["$","p","p-34",{"className":"mb-4","children":"By following these changes, your Dockerfile is now lighter, faster, and better suited for production environments. Let me know if youâ€™d like further refinements!"}],"\n",["$","h2","h2-1",{"className":"text-lg font-pixel text-primary mb-4 mt-5","children":["$","strong","strong-0",{"children":"Conclusion"}]}],"\n",["$","p","p-35",{"className":"mb-4","children":"Optimizing your Dockerfile is a crucial step in building smarter, faster, and more efficient containers. By adopting best practices, such as choosing the right base image, simplifying installed packages, leveraging caching, and using production-ready configurations, you can significantly enhance your build process and runtime performance."}],"\n",["$","p","p-36",{"className":"mb-4","children":"In this article, we explored how small, deliberate changesâ€”like switching to node:20-alpine, removing unnecessary tools, and refining dependency managementâ€”can lead to:"}],"\n",["$","ol","ol-9",{"className":"list-decimal pl-6 mb-4","children":["\n",["$","li","li-0",{"className":"mb-1","children":[["$","strong","strong-0",{"children":"Smaller Image Sizes"}],": Reducing storage costs and speeding up image transfers."]}],"\n",["$","li","li-1",{"className":"mb-1","children":[["$","strong","strong-0",{"children":"Faster Build Times"}],": Streamlining the build process for both initial builds and subsequent rebuilds."]}],"\n",["$","li","li-2",{"className":"mb-1","children":[["$","strong","strong-0",{"children":"Production-Ready Containers"}],": Ensuring stability, security, and efficiency in live environments."]}],"\n"]}],"\n",["$","p","p-37",{"className":"mb-4","children":"These optimizations not only improve the shipping and deployment of your application but also foster better development workflows by reducing frustrations and bottlenecks. By applying these best practices, you can â€œbuild smarterâ€ and create Dockerfiles that are both efficient and maintainable."}],"\n",["$","p","p-38",{"className":"mb-4","children":"Remember, a well-optimized Dockerfile is not just a technical improvementâ€”itâ€™s a step towards more reliable and scalable software delivery. Start applying these principles today and take your containerization game to the next level!"}]]}],["$","div",null,{"className":"mt-10 flex justify-end","children":["$","$L13",null,{"href":"/blog","className":"inline-flex items-center justify-center px-4 py-2 rounded-md bg-transparent text-primary border border-primary hover:bg-primary/10 transition-colors duration-300 shadow-sm","children":["$","div",null,{"className":"flex items-center","children":[["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 512 512","className":"mr-2","children":["$undefined",[["$","path","0",{"fill":"none","strokeLinecap":"round","strokeLinejoin":"round","strokeWidth":"48","d":"M244 400 100 256l144-144M120 256h292","children":[]}]]],"style":{"color":"$undefined"},"height":18,"width":18,"xmlns":"http://www.w3.org/2000/svg"}],["$","span",null,{"children":"Back to Blog"}]]}]}]}]]}]}]]}]
b:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
8:null
9:null
d:[["$","title","0",{"children":"Dang Do Quang Bao - Backend Software Engineer"}],["$","meta","1",{"name":"description","content":"Personal portfolio of Dang Do Quang Bao, a Backend Software Engineer specializing in PHP, Node.js, and Cloud Technologies"}],["$","meta","2",{"name":"author","content":"Dang Do Quang Bao"}],["$","meta","3",{"name":"keywords","content":"backend developer,software engineer,PHP,Laravel,Node.js,AWS,Vietnam developer,Quang Bao"}],["$","meta","4",{"name":"creator","content":"Dang Do Quang Bao"}],["$","meta","5",{"name":"publisher","content":"Dang Do Quang Bao"}],["$","meta","6",{"name":"robots","content":"index, follow"}],["$","meta","7",{"name":"googlebot","content":"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"}],["$","link","8",{"rel":"canonical","href":"https://quangpao.github.io/"}],["$","meta","9",{"property":"og:title","content":"Dang Do Quang Bao - Backend Software Engineer"}],["$","meta","10",{"property":"og:description","content":"Personal portfolio of Dang Do Quang Bao, a Backend Software Engineer specializing in PHP, Node.js, and Cloud Technologies"}],["$","meta","11",{"property":"og:url","content":"https://quangpao.github.io/"}],["$","meta","12",{"property":"og:site_name","content":"Dang Do Quang Bao - Portfolio"}],["$","meta","13",{"property":"og:locale","content":"en_US"}],["$","meta","14",{"property":"og:image:alt","content":"Dang Do Quang Bao - Backend Software Engineer"}],["$","meta","15",{"property":"og:image:type","content":"image/png"}],["$","meta","16",{"property":"og:image","content":"http://localhost:3000/opengraph-image?29c0b8cc29ed9c1c"}],["$","meta","17",{"property":"og:image:width","content":"1200"}],["$","meta","18",{"property":"og:image:height","content":"630"}],["$","meta","19",{"property":"og:type","content":"website"}],["$","meta","20",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","21",{"name":"twitter:title","content":"Dang Do Quang Bao - Backend Software Engineer"}],["$","meta","22",{"name":"twitter:description","content":"Personal portfolio of Dang Do Quang Bao, a Backend Software Engineer specializing in PHP, Node.js, and Cloud Technologies"}],["$","meta","23",{"name":"twitter:image","content":"http://localhost:3000/og-image.png"}]]
